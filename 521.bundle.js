"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[521],{4521:(o,t,e)=>{e.r(t),e.d(t,{createBoundingBox:()=>r,enumerateTilesInBoundingBox:()=>i,geoToXY:()=>u,getLocation:()=>s,watchLocation:()=>c});var n=e(6260);function r(o,t,e){var r=r([t,o]),a=a((0,n.ra8)(r,e,{units:"meters"}));return a}function a(o,t,e){var n=1<<e;return{x:Math.floor((t+180)/360*n),y:Math.floor((1-Math.log(Math.tan(o*Math.PI/180)+1/Math.cos(o*Math.PI/180))/Math.PI)/2*n),z:e}}function i(o,t,e){for(var n=[],r=t;r<=e;r++)for(var i=a(o[3],o[0],r),s=a(o[1],o[2],r),c=i.x;c<=s.x;c++)for(var u=i.y;u<=s.y;u++)n.push({x:c,y:u,z:r});return n}function s(o){return new Promise((function(o,t){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){o({latitude:t.coords.latitude,longitude:t.coords.longitude,heading:t.coords.heading||0})}),(function(o){t("Error getting current position: "+o.message)})):t("Geolocation is not supported by this browser")}))}function c(o){return navigator.geolocation.watchPosition((function(t){console.log(t),o(t.coords.latitude,t.coords.longitude,t.coords.heading)}),(function(o){o.code==o.PERMISSION_DENIED?alert("Could not get your location. If you did not see a permission request, make sure your browser is not configured to always block location services."):console.error("Error getting current position: "+o.message)}),{enableHighAccuracy:!1,timeout:5e3,maximumAge:0})}function u(o,t,e){var n=function(o){return o*(Math.PI/180)},r=n(e.geometry.coordinates[1]-o.geometry.coordinates[1]),a=n(e.geometry.coordinates[0]-o.geometry.coordinates[0]),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n(o.geometry.coordinates[1]))*Math.cos(n(e.geometry.coordinates[1]))*Math.sin(a/2)*Math.sin(a/2),s=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3,c=Math.atan2(e.geometry.coordinates[0]-o.geometry.coordinates[0],e.geometry.coordinates[1]-o.geometry.coordinates[1])-n(t);return{x:s*Math.sin(c)*.05,y:s*Math.cos(c)*.05}}}}]);