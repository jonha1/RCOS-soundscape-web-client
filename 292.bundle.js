"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[292],{6292:(t,e,n)=>{function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:String(e)}n.r(e),n.d(e,{default:()=>s});var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.windowSize=e,this.points=[]}var e,n;return e=t,(n=[{key:"addPoint",value:function(t,e){this.points.push({latitude:t,longitude:e}),this.points.length>this.windowSize&&this.points.shift()}},{key:"resetPoints",value:function(){this.points=[]}},{key:"computeHeading",value:function(){if(this.points.length<2)return null;for(var t=this.points.length,e=0,n=0;n<t-1;n++){var i=this.points[n],o=this.points[n+1],r=this.degreesToRadians(i.latitude),a=this.degreesToRadians(i.longitude),s=this.degreesToRadians(o.latitude),u=this.degreesToRadians(o.longitude)-a,l=Math.sin(u)*Math.cos(s),c=Math.cos(r)*Math.sin(s)-Math.sin(r)*Math.cos(s)*Math.cos(u),d=Math.atan2(l,c);e+=d=((d=this.radiansToDegrees(d))+360)%360}return e/(t-1)}},{key:"degreesToRadians",value:function(t){return t*(Math.PI/180)}},{key:"radiansToDegrees",value:function(t){return t*(180/Math.PI)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const s=function(t,e,n){var i,o=n.loadedCallback,r=void 0===o?function(){}:o,s=n.finishedCallback,u=void 0===s?function(){}:s,l=n.pointCallback,c=void 0===l?function(){}:l,d=n.errorCallback,h=void 0===d?function(){}:d,f=0,p=0,g=new a(5),v={speedUpFactor:1,trackPoints:[],getPointAtIndex:function(t){var e=this.trackPoints[t];return{lat:parseFloat(e.getAttribute("lat")),lon:parseFloat(e.getAttribute("lon"))}},getHeadingAtIndex:function(t){g.resetPoints();for(var e=Math.max(0,t-5),n=Math.min(t,this.trackPoints.length-1),i=e;i<=n;i++){var o=this.getPointAtIndex(i);g.addPoint(o.lat,o.lon)}return g.computeHeading()},play:function(){var t=this;i=setInterval((function(){if(f<v.trackPoints.length){var n=v.trackPoints[f],i=parseFloat(n.getAttribute("lat")),o=parseFloat(n.getAttribute("lon"));g.addPoint(i,o);var r=g.computeHeading();e.setView([i,o],16),c({lat:i,lon:o,heading:r}),f++}else t.pause(),u()}),1e3/this.speedUpFactor)},pause:function(){clearInterval(i)},seekTo:function(t){(f=t)<0?f=0:f>=this.trackPoints.length&&(f=this,trackPoints.length);var e=this.getPointAtIndex(f);e.heading=this.getHeadingAtIndex(f),c(e)},updateSlider:function(){var t=this.trackPoints.length-1;p=f/t*100,document.getElementById("pointSlider").value=p}},y=new FileReader;return y.onload=function(t){var e=t.target.result,n=(new DOMParser).parseFromString(e,"text/xml");v.trackPoints=n.querySelectorAll("trkpt");var i=v.getPointAtIndex(0);r(i)},y.onerror=function(t){h(t.target.error)},y.readAsText(t),v}}}]);