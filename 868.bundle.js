"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[868,487],{8868:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(6260);const o=function(e,t){var n=null,o={elem:document.getElementById("recentCalloutsList"),clear:function(){o.elem.innerHTML=""},add:function(a,r,s){var d=document.createElement("li");d.innerHTML=" "+a;var c=document.createElement("button");c.innerHTML="üîä",c.title="Start beacon",d.insertBefore(c,d.firstChild),c.addEventListener("click",(function(){n?n.stop():function(e){var t=document.createElement("p"),i=document.createElement("button");i.setAttribute("id","toggleBeacon"),i.innerText="‚è∏",t.appendChild(i);var o=document.createElement("span");o.setAttribute("id","currentBeacon"),t.appendChild(o),e.insertBefore(t,e.firstChild),i.addEventListener("click",(function(e){"‚è∏"==e.target.innerText?(n.stop(),e.target.innerText="‚ñ∂"):(n.start(),e.target.innerText="‚è∏")}))}(document.getElementById("recentCalloutsArea")),n=function(e,t,n,o){var a=(0,i.zx7)([t,e]),r=n.normalizedRelativePosition(a),s=null,d=new(window.AudioContext||window.webkitAudioContext),c=d.createPanner(),u=new Audio("app/sounds/beacons/Classic/Classic_OnAxis.wav"),l=new Audio("app/sounds/beacons/Classic/Classic_OffAxis.wav");u.loop=!0,u.muted=!0,l.loop=!0;var m=d.createMediaElementSource(u),p=d.createMediaElementSource(l);m.connect(c),p.connect(c),c.connect(d.destination);var f={start:function(){u.play(),l.play()},stop:function(){u.pause(),l.pause()},recomputePosition:function(){r=n.normalizedRelativePosition(a),c.setPosition(r.x,r.y,0)}};return u.addEventListener("timeupdate",(function(){if(u.currentTime<.1){var e=n.distance(a,{units:"meters"});if(e<10)f.stop(),new Audio("app/sounds/SS_beaconFound2_48k.wav").play();else if(Math.abs(s-e)>50)o.isPlaying||(s=e,o.addToQueue({soundUrl:"app/sounds/sense_mobility.wav"}),o.addToQueue({text:"Beacon: ".concat(e.toFixed(0)," meters")}));else{var t=180*Math.atan2(r.x,r.y)/Math.PI;Math.abs(t)<30?(u.muted=!1,l.muted=!0):(u.muted=!0,l.muted=!1)}}})),n.events.addEventListener("locationUpdated",f.recomputePosition),n.events.addEventListener("orientationUpdated",f.recomputePosition),f}(r,s,e,t),n.start(),function(e){document.getElementById("currentBeacon").innerText=" "+e,document.getElementById("toggleBeacon").innerText="‚è∏"}(a)})),o.elem.insertBefore(d,o.elem.firstChild),o.elem.children.length>25&&o.elem.removeChild(o.elem.lastChild)}};return o}}}]);